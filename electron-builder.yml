appId: com.centsible.app
productName: Centsible
directories:
  output: dist
# Skip npm rebuild since we do it manually
npmRebuild: false
# Completely skip node_modules dependency resolution to save memory
buildDependenciesFromSource: false
nodeGypRebuild: false
# Include only electron main files, no node_modules in asar
files:
  - electron/**/*.js
  - package.json
  - "!node_modules"
  - "!src"
  - "!.next"
  - "!public"
  - "!android"
  - "!ios"
  - "!.tmp-node-modules"
publish:
  provider: github
  owner: aruntk
  repo: centsible
mac:
  target:
    - dmg
    - zip
  category: public.app-category.finance
  icon: build/icon.icns
win:
  target: nsis
  icon: public/logo.png
nsis:
  oneClick: false
  allowToChangeInstallationDirectory: true
extraResources:
  # Next.js standalone server
  - from: .next/standalone/server.js
    to: standalone/server.js
  - from: .next/standalone/package.json
    to: standalone/package.json
  - from: .next/standalone/.next
    to: standalone/.next
    filter:
      - "**/*"
  - from: .next/standalone/node_modules
    to: standalone/node_modules
    filter:
      - "**/*"
      - "!better-sqlite3/**"
  - from: .next/static
    to: standalone/.next/static
    filter:
      - "**/*"
  - from: public
    to: standalone/public
    filter:
      - "**/*"
  - from: node_modules/better-sqlite3
    to: standalone/node_modules/better-sqlite3
    filter:
      - "**/*"
  # Copy Electron-rebuilt better-sqlite3 to hashed name for Turbopack
  - from: node_modules/better-sqlite3
    to: standalone/node_modules/better-sqlite3-90e2652d1716b047
    filter:
      - "**/*"
  - from: public/logo.png
    to: icon.png
